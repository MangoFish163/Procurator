# REDIS 配置
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# 飞书应用凭据
FEISHU_CACHE_BACKEND=redis
FEISHU_CACHE_PREFIX=feishu_token:
FEISHU_APP_ID=cli_a996b407ceb5500b
FEISHU_APP_SECRET=xqWxbmMxoksJDsLlSMIVYe6NHUXAlWUv
FEISHU_APP_TOKEN=Ob5abjotMaBkq3s3fILclOignUh

# 17track配置
TRACK_API_KEY=B8D3700DCE80E9B7198059905F68F077

# 项目数据隔离前缀
PROJECT_PREFIX=Procurator
# 公共配置
RETRY_MAX=3
# 任务队列后端: memory (默认：memory内存) / redis (推荐生产环境)
QUEUE_BACKEND=redis
CACHE_TIMEOUT=3600
CACHE_TIMEOUT_SHORT=600
CACHE_TIMEOUT_LONG=86400

# 脚本执行器配置 (Script Runner)
# 脚本最大执行时间 (秒)，超时将强制杀死子进程
SCRIPT_TIMEOUT_SECONDS=600
# 最大并发脚本数，超过此数量的请求将等待
MAX_CONCURRENT_SCRIPTS=2

# 日志配置
# 单个日志文件最大大小 (MB)，默认 5MB
LOG_MAX_BYTES=5
# 日志格式: text (开发推荐) / json (生产推荐)
LOG_FORMAT=text
# 是否输出到文件: true (开发推荐) / false (生产推荐)
LOG_TO_FILE=true
# 数据与日志路径 (可选，默认在项目根目录)
# DATA_DIR=/data
# LOG_DIR=/var/log/procurator

# 服务器配置
SERVER_HOST=127.0.0.1
SERVER_PORT=50002
SERVER_RELOAD=1
SERVER_LOG_LEVEL=info

# IP 白名单 (IP Whitelist)
ALLOWED_IPS=*

# 令牌限流 (Rate Limiting)
RATE_LIMIT_MAX=30
RATE_LIMIT_WINDOW=60

# 访问令牌 (X-API-Token)
# 模式 A: 单 Token (简单模式)
# API_TOKEN=PROCURATOR
# API_ROLE=trusted

# 模式 B: 多 Token (高级模式 - JSON 格式)
# 键为 Token，值为角色 (admin/ops/dev/readonly)
API_TOKENS={"PROCURATOR-ADMIN": "admin", "PROCURATOR": "trusted", "other-key": "readonly"}

# 模式 C: 多 Token (列表模式)
# 所有 Token 共享 API_ROLE 定义的角色
# API_TOKENS=token1,token2,token3

# 数据库配置 (PostgreSQL)
DATABASE_URL=postgresql+asyncpg://postgres:root@127.0.0.1:5432/procurator
